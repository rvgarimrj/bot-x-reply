<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

*No recent activity*
</claude-mem-context>

---

## ğŸš€ CLAUDE: INICIO DE SESSÃƒO (LER PRIMEIRO!)

**Eu sou um sistema de aprendizado contÃ­nuo.** A cada sessÃ£o, devo:

### 1. Verificar Estado Atual
```bash
# Ver Ãºltimos insights e recomendaÃ§Ãµes
cat data/learnings.json | head -60
```

### 2. Rodar AnÃ¡lise (se necessÃ¡rio)
```bash
# Se learnings.json estÃ¡ desatualizado (>24h)
node scripts/analyze-and-learn.js
```

### 3. Continuar Melhorando
- Implementar recomendaÃ§Ãµes pendentes
- Ajustar config baseado em dados
- Documentar mudanÃ§as

### Checklist RÃ¡pido
- [ ] Li `data/learnings.json`?
- [ ] Verifiquei `recommendations` pendentes?
- [ ] Daemon estÃ¡ rodando? (`pgrep -f auto-daemon`)
- [ ] Chrome estÃ¡ ok? (`curl -s http://127.0.0.1:9222/json/version`)

---

# Bot-X-Reply

Sistema inteligente de engajamento no X (Twitter) via replies estratÃ©gicos.

---

## REGRAS IMPORTANTES (SEMPRE RESPEITAR)

### PRIORIDADE #1: Parecer HUMANO (Anti-DetecÃ§Ã£o de IA)

O usuÃ¡rio @garimdreaming foi BLOQUEADO por contas que detectaram replies de IA.
**TODOS os replies devem parecer 100% escritos por humano.**

### PROIBIDO (DetectÃ¡vel como IA):

**InglÃªs:**
- "Fun fact:", "Interestingly,", "It's worth noting", "Actually,"
- "masterpiece", "revolutionary", "game-changer", "countless", "incredible"

**PortuguÃªs:**
- "Curiosidade:", "Vale ressaltar:", "Na verdade,", "De fato,"
- "obra-prima", "revolucionÃ¡rio", "incrÃ­vel", "impressionante"
- "Muito bom!", "Excelente!", "Perfeito!", "Concordo plenamente!"

**Ambos:**
- Estrutura com travessÃµes listando mÃºltiplos fatos
- GramÃ¡tica 100% perfeita
- Empacotar muitos dados/fatos em um reply

### COMO HUMANOS ESCREVEM:

**InglÃªs:** "omg", "lol", "ngl", "tbh", "lowkey", "fr", "no way"
**PortuguÃªs:** "cara", "mano", "vÃ©i", "pÃ´", "vc", "tb", "pq", "mt", "kkkk"

- UMA ideia por reply, nÃ£o uma lista
- OpiniÃ£o pessoal, nÃ£o dados frios
- Informal, Ã s vezes incompleto
- MemÃ³ria/experiÃªncia pessoal

### Exemplo de Reply BOM vs RUIM

**InglÃªs:**
```
RUIM: "That's Eric Chahi's masterpiece! The rotoscoped animation was revolutionary - influenced countless indie devs."
BOM: "played this so much as a kid, the death animations were brutal"
```

**PortuguÃªs:**
```
RUIM: "Essa Ã© a obra-prima do Eric Chahi! A animaÃ§Ã£o rotoscÃ³pica foi revolucionÃ¡ria - influenciou inÃºmeros desenvolvedores indie."
BOM: "jogava isso direto quando crianÃ§a, as animaÃ§Ãµes de morte eram brutais"
```

### Chrome - Funcionar com Tela Bloqueada
O Chrome DEVE ser iniciado com estas flags para nÃ£o dar timeout:
- `--disable-background-timer-throttling`
- `--disable-backgrounding-occluded-windows`
- `--disable-renderer-backgrounding`

App Nap DEVE estar desativado:
```bash
defaults write com.google.Chrome NSAppSleepDisabled -bool YES
```

### Timeout do Puppeteer
- `protocolTimeout`: 120000ms (nÃ£o 60000)
- `page.setDefaultTimeout`: 60000ms
- Retry automÃ¡tico: 3 tentativas

### InserÃ§Ã£o de Texto (Anti-InterferÃªncia)
- **NAO usa** digitaÃ§Ã£o char por char (interfere se usuÃ¡rio estiver digitando)
- **USA** inserÃ§Ã£o via DOM (`execCommand('insertText')`)
- Textos longos (>80 chars): divide em 2-3 chunks
- Delays humanizados: 0.8-1.5s antes, 0.5-1s depois
- Permite trabalhar no computador enquanto bot posta

### Velocidade de DigitaÃ§Ã£o (Humanizada)
- **Delay por char**: 150-350ms (configurado em `HUMAN_CONFIG.typingSpeed`)
- Um reply de 100 chars leva 15-35 segundos (como pessoa real)
- NAO usar delay < 100ms (parece bot)

### Intervalo Entre Replies (Dinamico por Horario)
Intervalos variam baseado em horario de pico de engajamento:

| Tipo | Horarios | Intervalo |
|------|----------|-----------|
| **Pico** | 12-14h, 17-20h | 10-15min |
| **Bom** | 8-10h, 20-23h | 12-18min |
| **Fraco** | outros | 18-25min |

Configurado em `scripts/auto-daemon.js` > `CONFIG.peakIntervals`

---

## ğŸ† ESTRATÃ‰GIA DE MONETIZAÃ‡ÃƒO (OURO - NÃƒO PERDER!)

### O Segredo do Algoritmo do X

O algoritmo do X Ã© **open source** e revela os pesos de cada tipo de engajamento:

| Tipo de Engajamento | Peso no Algoritmo | EstratÃ©gia |
|---------------------|-------------------|------------|
| Like simples | 1x | âŒ Baixo valor |
| Bookmark | 10x | - |
| Click no link | 11x | - |
| Click no perfil + like/reply | 12x | - |
| Reply direto | 13.5x | âœ… Nosso foco |
| Retweet | 20x | - |
| **Reply que recebe reply do autor** | **75x** | ğŸ¯ **MÃXIMO VALOR** |

### A FÃ³rmula de Ouro

```
1 reply que o autor responde = 75x mais valor que 1 like

Um tweet com 5 replies onde o autor responde cada um
  gera MUITO mais valor algorÃ­tmico
  que um tweet com 50 likes sem replies
```

**ConclusÃ£o**: Devemos priorizar tweets onde o **AUTOR RESPONDE os comentÃ¡rios**.

### Sistema de 4 Fontes de Tweets

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DISCOVERY ENGINE v2                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. TIMELINE (For You)                                          â”‚
â”‚     â””â”€ Tweets do feed pessoal                                   â”‚
â”‚     â””â”€ Score base: +0                                           â”‚
â”‚                                                                  â”‚
â”‚  2. TRENDING TOPICS                                             â”‚
â”‚     â””â”€ TÃ³picos em alta filtrados por keywords tech/AI/crypto    â”‚
â”‚     â””â”€ Score base: +10                                          â”‚
â”‚                                                                  â”‚
â”‚  3. HACKER NEWS                                                 â”‚
â”‚     â””â”€ API top stories â†’ busca tweets relacionados              â”‚
â”‚     â””â”€ Score base: +15 (alta relevÃ¢ncia tech)                   â”‚
â”‚                                                                  â”‚
â”‚  4. CREATOR INSPIRATION (NOVO!)                                 â”‚
â”‚     â””â”€ URL: x.com/i/jf/creators/inspiration/top_posts           â”‚
â”‚     â””â”€ Tweets curados pelo algoritmo do X                       â”‚
â”‚     â””â”€ Score base: +25 (+15 extra se tab "replies")             â”‚
â”‚     â””â”€ Fallback: busca "AI startup", "shipped product"          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sistema de Score Inteligente

```
SCORE FINAL = Base + Engajamento + RecÃªncia + Fonte + Autor

â”â”â” BASE â”â”â”
likes/100 + retweets/10

â”â”â” RECÃŠNCIA â”â”â”
< 1h:  +50  â”‚  < 2h:  +40  â”‚  < 4h:  +20  â”‚  < 8h:  +10

â”â”â” FONTE â”â”â”
Timeline:           +0
Trending:          +10
HackerNews:        +15
Creator Inspiration: +25
  â””â”€ Tab "replies": +15 extra (alta conversaÃ§Ã£o!)

â”â”â” AUTOR ENGAJADO â”â”â”
(Se verificamos que autor responde comentÃ¡rios)
5+ replies do autor: +40
3+ replies:         +25
1+ replies:         +10

â”â”â” CONTEÃšDO â”â”â”
Tem pergunta (?):     +20
OpiniÃ£o polÃªmica:     +15
Conta prioritÃ¡ria:    +30
```

### DistribuiÃ§Ã£o por HorÃ¡rio de Pico

```
HORÃRIOS DE PICO (Timezone BR + USA)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”¥ PICO MÃXIMO â”‚ 12-14h, 17-20h â”‚ Intervalo: 10-15min
   BR: almoÃ§o + fim de tarde
   USA: manhÃ£ + tarde
   â†’ MAIS replies nesse horÃ¡rio!

ğŸ“ˆ BOM         â”‚ 8-10h, 20-23h  â”‚ Intervalo: 12-18min
   BR: manhÃ£ + noite
   â†’ Ritmo normal

ğŸ“‰ FRACO       â”‚ outros         â”‚ Intervalo: 18-25min
   â†’ Economiza para horÃ¡rios melhores
```

### Filtro de Keywords (Anti-RuÃ­do)

**NOSSO NICHO**: Tech/IA/Investimentos/Economia/Crypto/Vibe Coding

A pÃ¡gina Creator Inspiration mostra tweets populares GERAIS (BBB, mÃºsica, fofoca).
Filtramos com regex + word boundaries para garantir tweets do NICHO:

```
TECH/AI:
  gpt, chatgpt, llm, claude, openai, anthropic
  machine learning, artificial intelligence, neural network

STARTUPS:
  startup, founder, entrepreneur, vc, funding
  shipped, revenue, mrr, bootstrap, indie hacker

CRYPTO:
  bitcoin, btc, ethereum, web3, defi, nft, blockchain
  altcoin, memecoin, bull market, bear market, bullish, bearish

INVESTIMENTOS/ECONOMIA (NOVO!):
  stock, stocks, stock market, s&p 500, nasdaq, dow jones
  fed, federal reserve, interest rate, inflation
  gdp, recession, economy, economic
  investing, investment, portfolio, trading, trader
  market, markets, market cap, earnings, revenue
  hedge fund, asset, macro, fiscal, monetary
  bond, treasury, yield, gold, commodities
  etf, index fund, dividend, passive income

VIBE CODING/DEV:
  coding, programming, python, react, github, deploy
  vibe coding, cursor, copilot, code editor, vscode
```

### Learning System (Auto-Melhoria)

O sistema aprende automaticamente quais fontes geram mais engajamento:

```javascript
// Estrutura de dados em data/knowledge.json
{
  "sourceStats": {
    "creator_inspiration_replies": {
      "posts": 45,
      "totalLikes": 540,
      "authorReplies": 8,    // â† MAIS IMPORTANTE!
      "follows": 3
    },
    "timeline": {
      "posts": 120,
      "totalLikes": 890,
      "authorReplies": 12,
      "follows": 5
    }
  }
}

// ApÃ³s 100+ posts, sistema auto-prioriza fontes com maior:
// authorReplies / posts (taxa de reply do autor)
```

### Fluxo Completo: Reply â†’ Seguidor â†’ MonetizaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DISCOVERY  â”‚â”€â”€â”€â–¶â”‚   REPLY     â”‚â”€â”€â”€â–¶â”‚   BOOST     â”‚â”€â”€â”€â–¶â”‚ CONVERSÃƒO   â”‚
â”‚  4 fontes   â”‚    â”‚ Inteligente â”‚    â”‚ AlgorÃ­tmico â”‚    â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                  â”‚                  â”‚                  â”‚
      â–¼                  â–¼                  â–¼                  â–¼
 Encontra tweets    Anti-detecÃ§Ã£o     Autor responde     Visibilidade
 do nicho tech/     RotaÃ§Ã£o estilos   = 75x boost        para milhares
 AI/crypto          Parecer humano                       de pessoas
                                                              â”‚
                                                              â–¼
                                                     Novos seguidores
                                                     QUALIFICADOS
                                                     (mesmo nicho)
                                                              â”‚
                                                              â–¼
                                                      MONETIZAÃ‡ÃƒO
                                                     (produtos, afiliados,
                                                      consultoria, etc.)
```

### Comandos de VerificaÃ§Ã£o (IMPORTANTE!)

```bash
# 1. Verificar se o novo sistema estÃ¡ ativo
node -e "import('./src/discovery.js').then(m => {
  console.log('FunÃ§Ãµes disponÃ­veis:')
  console.log('- findCreatorInspirationTweets:', typeof m.findCreatorInspirationTweets)
  console.log('- checkAuthorEngagement:', typeof m.checkAuthorEngagement)
  console.log('- discoverTweets:', typeof m.discoverTweets)
})"

# 2. Testar discovery completo (4 fontes)
node -e "import('./src/discovery.js').then(m => m.discoverTweets(5).then(t => {
  console.log('Tweets encontrados:', t.length)
  const sources = {}
  t.forEach(x => sources[x.source] = (sources[x.source]||0)+1)
  console.log('Por fonte:', sources)
  console.log('Top tweet:', t[0]?.author, 'score:', t[0]?.score)
}))"

# 3. Testar Creator Inspiration com fallback
node -e "import('./src/discovery.js').then(m => m.findCreatorInspirationTweets(3).then(t => {
  console.log('Creator Inspiration:', t.length, 'tweets')
  t.forEach(x => console.log('-', x.author, '| score:', x.score, '| tab:', x.inspirationTab))
}))"

# 4. Ver learning system (melhores fontes)
node -e "import('./src/knowledge.js').then(m => {
  const best = m.getBestSources(5)
  console.log('Melhores fontes aprendidas:')
  best.forEach((s,i) => console.log((i+1)+'.', s.source, '- authorReplyRate:', s.authorReplyRate))
})"

# 5. Verificar se daemon estÃ¡ usando versÃ£o nova
ps aux | grep auto-daemon | grep -v grep
# Se estiver rodando, reiniciar para usar cÃ³digo novo:
# pkill -2 -f "auto-daemon.js" && sleep 2 && node scripts/auto-daemon.js
```

### MÃ©tricas de Sucesso Esperadas

| MÃ©trica | Antes | Depois | Melhoria |
|---------|-------|--------|----------|
| Fontes de tweets | 3 | 4 | +33% |
| Score mÃ©dio dos tweets | ~60 | ~85 | +42% |
| Tweets relevantes/ciclo | 3-5 | 8-12 | +140% |
| Chance de reply do autor | ~5% | ~25% | +400% |
| Boost algorÃ­tmico | 13x | atÃ© 75x | +477% |
| Qualidade dos seguidores | mÃ©dia | alta | â†‘â†‘â†‘ |

---

## ğŸ§ª VERIFICAÃ‡ÃƒO DE SUCESSO

### Script de Teste Automatizado

```bash
# Rodar verificaÃ§Ã£o completa (5 testes)
node scripts/check-success.js
```

**Testes executados:**
1. âœ… Discovery com 4 fontes
2. âœ… Creator Inspiration + Fallback
3. âœ… Learning System coletando dados
4. âœ… EstatÃ­sticas do dia
5. âœ… Filtro de keywords do nicho

### Monitoramento ContÃ­nuo

```bash
# Ver logs do daemon em tempo real
tail -f logs/auto-daemon.log

# Verificar se daemon estÃ¡ rodando
ps aux | grep auto-daemon | grep -v grep

# Ver estatÃ­sticas do Learning System
node -e "import('./src/knowledge.js').then(m => {
  const best = m.getBestSources(5)
  console.log('Melhores fontes:')
  best.forEach((s,i) => console.log((i+1)+'.', s.source, '| posts:', s.posts, '| authorReplies:', s.authorReplies))
})"
```

### Marcos de Sucesso

| Marco | Quando | AÃ§Ã£o |
|-------|--------|------|
| **10 posts** | Dia 1 | Verificar se todas as fontes estÃ£o contribuindo |
| **50 posts** | Dia 2-3 | Analisar quais fontes geram mais engajamento |
| **100 posts** | Dia 4-5 | Learning System tem dados suficientes para otimizar |
| **200 posts** | Semana 2 | Analisar crescimento de seguidores qualificados |

### Sinais de Sucesso

**âœ… Funcionando bem se:**
- Discovery busca de 4 fontes (ver "Por fonte:" nos logs)
- Creator Inspiration usa fallback quando necessÃ¡rio
- Scores > 50 para tweets selecionados
- Learning System registra sourceStats
- Replies parecem humanos (sem flags de IA)

**âš ï¸ AtenÃ§Ã£o se:**
- Apenas 1-2 fontes retornando tweets
- Scores consistentemente < 30
- Muitos erros nos logs
- 0 tweets encontrados frequentemente

### PrÃ³ximos Passos (Checklist)

- [ ] ApÃ³s 100 posts: verificar `getBestSources()`
- [ ] Identificar fonte com maior `authorReplyRate`
- [ ] Considerar ativar `check_author_engagement` no config
- [ ] Analisar quais tipos de reply geram mais follows
- [ ] Ajustar keywords se necessÃ¡rio para o nicho

---

## ğŸ§  SISTEMA DE APRENDIZADO CONTÃNUO (CLAUDE)

### Como Eu (Claude) Aprendo Entre SessÃµes

Para continuar melhorando o bot, use este comando no inÃ­cio de cada sessÃ£o:

```bash
# Mostra relatÃ³rio completo para eu analisar
node scripts/analyze-and-learn.js
```

Isso me mostra:
- Performance de cada fonte
- Melhores horÃ¡rios
- Insights automÃ¡ticos
- RecomendaÃ§Ãµes de otimizaÃ§Ã£o

### Arquivos que Eu Leio para "Lembrar"

| Arquivo | O que ContÃ©m |
|---------|--------------|
| `data/learnings.json` | Insights, padrÃµes, recomendaÃ§Ãµes aprendidas |
| `data/knowledge.json` | Replies postados, mÃ©tricas, sourceStats |
| `.claude/CLAUDE.md` | EstratÃ©gias e regras do sistema |

### Workflow de Melhoria ContÃ­nua

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CICLO DE APRENDIZADO                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. DAEMON POSTA REPLIES                                        â”‚
â”‚     â””â”€ Registra fonte, score, horÃ¡rio em knowledge.json        â”‚
â”‚                                                                  â”‚
â”‚  2. COLLECT-METRICS (a cada 6-12h)                              â”‚
â”‚     â””â”€ Coleta likes, replies, authorReplied                    â”‚
â”‚     â””â”€ Atualiza mÃ©tricas em knowledge.json                     â”‚
â”‚                                                                  â”‚
â”‚  3. ANALYZE-AND-LEARN (diÃ¡rio/semanal)                          â”‚
â”‚     â””â”€ Analisa padrÃµes de performance                          â”‚
â”‚     â””â”€ Gera insights automÃ¡ticos                               â”‚
â”‚     â””â”€ Salva learnings em learnings.json                       â”‚
â”‚                                                                  â”‚
â”‚  4. SESSÃƒO COM CLAUDE (quando necessÃ¡rio)                       â”‚
â”‚     â””â”€ Roda: node scripts/analyze-and-learn.js                 â”‚
â”‚     â””â”€ Claude analisa relatÃ³rio                                 â”‚
â”‚     â””â”€ Claude propÃµe/implementa melhorias                      â”‚
â”‚                                                                  â”‚
â”‚  5. DEPLOY DAS MELHORIAS                                        â”‚
â”‚     â””â”€ Reinicia daemon com cÃ³digo novo                         â”‚
â”‚     â””â”€ Volta para passo 1                                       â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Comandos para AnÃ¡lise com Claude

```bash
# 1. Gerar relatÃ³rio completo (PRINCIPAL)
node scripts/analyze-and-learn.js

# 2. Verificar sistema estÃ¡ funcionando
node scripts/check-success.js

# 3. Coletar mÃ©tricas (necessÃ¡rio para aprender)
node scripts/collect-metrics.js --all

# 4. Ver estado atual em tempo real
cat data/learnings.json | head -50
```

### O que Eu (Claude) Posso Melhorar

Baseado nos dados, posso ajustar:

| Ãrea | Arquivo | Tipo de Ajuste |
|------|---------|----------------|
| Prioridade de fontes | `config/accounts.json` | Aumentar/reduzir peso |
| HorÃ¡rios de pico | `scripts/auto-daemon.js` | Ajustar intervalos |
| Keywords do nicho | `src/discovery.js` | Adicionar/remover termos |
| Estilos de reply | `src/claude.js` | Ajustar prompts |
| Filtros de qualidade | `config/accounts.json` | min_likes, max_replies |

### Marcos de Aprendizado

| Replies | O que Acontece |
|---------|----------------|
| 50 | Primeiros padrÃµes visÃ­veis |
| 100 | Learning System tem dados confiÃ¡veis |
| 200 | Insights de horÃ¡rio e estilo aparecem |
| 500 | Sistema auto-otimizado, ajustes finos |

---

## ğŸ“Š MONITORAMENTO E AUTO-OTIMIZAÃ‡ÃƒO

### Scripts de Monitoramento

O sistema inclui 3 scripts para monitoramento e otimizaÃ§Ã£o contÃ­nua:

| Script | FunÃ§Ã£o | FrequÃªncia Recomendada |
|--------|--------|------------------------|
| `check-success.js` | Verifica se sistema estÃ¡ funcionando | ApÃ³s mudanÃ§as |
| `monitor-and-optimize.js` | Analisa performance e sugere otimizaÃ§Ãµes | Diariamente |
| `collect-metrics.js` | Coleta likes/replies dos posts | A cada 6-12h |

### Comandos de Monitoramento

```bash
# 1. VerificaÃ§Ã£o rÃ¡pida (5 testes)
node scripts/check-success.js

# 2. AnÃ¡lise completa de performance
node scripts/monitor-and-optimize.js

# 3. Coletar mÃ©tricas de engajamento
node scripts/collect-metrics.js          # Ãšltimos 20 replies
node scripts/collect-metrics.js --all    # Todos sem mÃ©tricas

# 4. Ver estatÃ­sticas em tempo real
node -e "import('./src/knowledge.js').then(m => {
  const stats = m.getSourceStats()
  console.log('=== PERFORMANCE POR FONTE ===')
  Object.entries(stats).forEach(([src, data]) => {
    const rate = data.posts > 0 ? (data.authorReplies/data.posts*100).toFixed(1) : 0
    console.log(src + ': ' + data.posts + ' posts, ' + rate + '% author replies')
  })
})"
```

### Workflow de OtimizaÃ§Ã£o

```
DIÃRIO (23:30 - antes do resumo):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Daemon envia resumo no Telegram
2. Sistema jÃ¡ registrou sourceStats

SEMANAL (apÃ³s 100+ posts):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Rodar: node scripts/monitor-and-optimize.js
2. Analisar quais fontes tÃªm maior authorReplyRate
3. Considerar ajustes no config/accounts.json

QUANDO NECESSÃRIO:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- Se engajamento cair: node scripts/collect-metrics.js --all
- Se muitos tweets fora do nicho: ajustar keywords
- Se poucos tweets: reduzir min_likes no config
```

### O que o Sistema Aprende

```javascript
// data/knowledge.json - sourceStats
{
  "creator_inspiration_replies": {
    "posts": 45,           // Quantos replies postamos dessa fonte
    "totalLikes": 540,     // Total de likes recebidos
    "authorReplies": 8,    // Quantos autores responderam (75x boost!)
    "follows": 3           // Novos follows (estimado)
  }
}

// CÃ¡lculo de performance:
authorReplyRate = authorReplies / posts * 100

// Sistema prioriza fontes com maior authorReplyRate
// apÃ³s 100+ posts
```

### MÃ©tricas Chave (KPIs)

| KPI | Meta | Como Medir |
|-----|------|------------|
| Author Reply Rate | >20% | `authorReplies / posts` |
| Avg Likes | >5 | `totalLikes / posts` |
| Posts/Dia | 50-80 | Resumo diÃ¡rio Telegram |
| Fontes Ativas | 4 | `check-success.js` |

### Alertas AutomÃ¡ticos

O `monitor-and-optimize.js` gera alertas quando:

```
âš ï¸ ALERTA: Fonte X tem performance muito abaixo da mÃ©dia
   Considerar desativar ou revisar keywords

âš ï¸ ALERTA: authorReplyRate geral abaixo de 10%
   Revisar qualidade dos replies ou seleÃ§Ã£o de tweets

âš ï¸ ALERTA: 0 tweets encontrados em 3 ciclos consecutivos
   Verificar conexÃ£o com Chrome ou filtros muito restritivos
```

### Ciclo de Melhoria ContÃ­nua

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   POSTAR REPLY   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ REGISTRAR FONTE  â”‚ â† recordSourceOutcome()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ COLETAR MÃ‰TRICAS â”‚ â† collect-metrics.js (6-12h depois)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ATUALIZAR STATS  â”‚ â† updateSourceMetrics()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ANALISAR PADRÃ•ES â”‚ â† monitor-and-optimize.js
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AJUSTAR PRIORID. â”‚ â† getSourcePriorityMultiplier()
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
     (loop...)
```

### ğŸ“¥ FLUXO DE ALIMENTAÃ‡ÃƒO DE DADOS

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    QUANDO E QUE DADOS SÃƒO COLETADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MOMENTO 1: IMEDIATAMENTE APÃ“S POSTAR (auto-daemon.js)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
FunÃ§Ã£o: recordSourceOutcome() + addReply()
Dados salvos em knowledge.json:

  replies[]: {
    id, timestamp, tweetUrl, tweetAuthor, tweetText,
    replyText, replyIndex, wasRecommended,
    source,           â† "timeline", "trending", "hackernews", "creator_inspiration"
    inspirationTab,   â† "replies", "likes", "search_fallback"
    score,            â† score calculado do tweet
    style,            â† estilo usado ("direct", "memory", etc)
    language,         â† "en" ou "pt"
    metrics: { likes: null, replies: null, authorReplied: null }
  }

  sourceStats[source]: {
    posts++,          â† contador
    avgScore,         â† mÃ©dia dos scores
    lastUsed          â† timestamp
  }


MOMENTO 2: 6-12 HORAS DEPOIS (collect-metrics.js)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
FunÃ§Ã£o: fetchReplyMetrics() + updateReplyMetrics()
Processo:
  1. Navega para tweetUrl de cada reply
  2. Encontra nosso reply na thread
  3. Extrai mÃ©tricas do reply
  4. Verifica se autor original respondeu

Dados atualizados em knowledge.json:

  replies[].metrics: {
    likes,            â† quantos likes nosso reply recebeu
    replies,          â† quantos replies nosso reply recebeu
    authorReplied,    â† BOOLEAN: autor original respondeu? (75x boost!)
    checkedAt         â† timestamp da coleta
  }

  sourceStats[source]: {
    totalLikes += likes,
    authorReplies++   â† se authorReplied = true
  }


MOMENTO 3: DIARIAMENTE/SEMANALMENTE (analyze-and-learn.js)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
FunÃ§Ã£o: analyzeSourcePerformance(), generateInsights()
Processo:
  1. LÃª knowledge.json (replies + sourceStats)
  2. Calcula mÃ©tricas agregadas por fonte, horÃ¡rio, estilo
  3. Identifica padrÃµes de sucesso
  4. Gera insights e recomendaÃ§Ãµes

Dados salvos em learnings.json:

  patterns: {
    bestSources,      â† ["creator_inspiration_replies", "hackernews"]
    bestHours,        â† [12, 13, 17, 18, 19]
    bestStyles        â† ["observation", "question"]
  }

  insights[]: {
    type,             â† "success", "warning", "info"
    category,         â† "source", "timing", "engagement"
    message,          â† texto do insight
    action,           â† aÃ§Ã£o recomendada
    date
  }

  recommendations[]: {
    priority,         â† "high", "medium", "low"
    title, description, action
  }


MOMENTO 4: NOVA SESSÃƒO CLAUDE (session-context.js + hook)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
FunÃ§Ã£o: Hook SessionStart
Processo:
  1. LÃª learnings.json e knowledge.json
  2. Gera resumo de contexto
  3. Claude recebe e pode agir

Claude pode entÃ£o:
  - Implementar recomendaÃ§Ãµes
  - Ajustar config/accounts.json
  - Modificar src/discovery.js (keywords, scores)
  - Atualizar intervalos em auto-daemon.js

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### ğŸ”„ AutomaÃ§Ã£o da Coleta

Para automatizar collect-metrics, adicionar ao crontab:

```bash
# Editar crontab
crontab -e

# Adicionar (roda 2x ao dia: 14h e 22h)
0 14 * * * cd /Users/user/AppsCalude/Bot-X-Reply && node scripts/collect-metrics.js >> logs/collect-metrics.log 2>&1
0 22 * * * cd /Users/user/AppsCalude/Bot-X-Reply && node scripts/collect-metrics.js >> logs/collect-metrics.log 2>&1

# AnÃ¡lise diÃ¡ria Ã s 23:00
0 23 * * * cd /Users/user/AppsCalude/Bot-X-Reply && node scripts/analyze-and-learn.js >> logs/analyze.log 2>&1
```

### ğŸ“Š Estrutura dos Arquivos de Dados

```
data/
â”œâ”€â”€ knowledge.json     # 500KB-2MB (cresce com replies)
â”‚   â”œâ”€â”€ replies[]      # Array de todos os replies postados
â”‚   â”œâ”€â”€ sourceStats{}  # EstatÃ­sticas por fonte
â”‚   â”œâ”€â”€ patterns{}     # PadrÃµes identificados
â”‚   â””â”€â”€ lastUpdated    # Timestamp
â”‚
â””â”€â”€ learnings.json     # ~10KB (insights consolidados)
    â”œâ”€â”€ insights[]     # Ãšltimos 50 insights
    â”œâ”€â”€ patterns{}     # Melhores fontes/horÃ¡rios/estilos
    â”œâ”€â”€ recommendations[] # AÃ§Ãµes pendentes
    â””â”€â”€ changelog[]    # HistÃ³rico de anÃ¡lises
```

---

## Arquitetura

- **Telegram Bot** (`@garim_x_reply_bot`): Interface de aprovaÃ§Ã£o
- **Claude API**: GeraÃ§Ã£o de replies com detecÃ§Ã£o de idioma
- **Playwright MCP**: AutomaÃ§Ã£o do browser para postar

## Modos de Operacao

### Modo AUTONOMO (PRINCIPAL) - auto-daemon.js
**Este e o modo recomendado para 50+ replies/dia**

1. Daemon roda 8h-23h59 automaticamente
2. Busca tweets de **4 fontes**: timeline, trending, Hacker News, **Creator Inspiration**
3. Filtra: ja respondidos, limite por conta, qualidade
4. Gera reply com rotacao de estilo (anti-deteccao)
5. Posta via Puppeteer automaticamente
6. Notifica cada reply no Telegram (silencioso)
7. Envia resumo diario as 23:30

**Intervalo dinamico por horario de pico**:
- Pico (12-14h, 17-20h): 10-15min
- Bom (8-10h, 20-23h): 12-18min
- Fraco: 18-25min

**Decisao inteligente**: se atingiu meta normal (70), so posta tweets score >= 80

### Modo Manual (On-Demand) - reply-bot.js
1. Usuario envia URL de tweet no Telegram
2. Claude extrai texto e gera 3 opcoes de reply
3. Usuario aprova/edita
4. Bot posta via Puppeteer

### Modo Proativo Antigo - search-daemon.js
1. Daemon busca tweets de contas configuradas
2. Notifica usuario no Telegram
3. Mesmo fluxo de aprovacao manual

## Estrutura

```
src/
â”œâ”€â”€ claude.js      # Geracao de replies + STYLE ROTATION (5 estilos/idioma)
â”œâ”€â”€ telegram.js    # Interface Telegram + sendDailySummary()
â”œâ”€â”€ browser.js     # Instrucoes para Playwright MCP
â”œâ”€â”€ finder.js      # Busca, filtragem, tracking (50-80/dia)
â”œâ”€â”€ discovery.js   # NOVO: Multi-source discovery (timeline + trending + HN)
â”œâ”€â”€ puppeteer.js   # Automacao Chrome para postar
â”œâ”€â”€ research.js    # Pesquisa contexto antes de gerar
â”œâ”€â”€ knowledge.js   # Base de conhecimento (aprendizado)
â””â”€â”€ twitter.js     # API do X (leitura)

scripts/
â”œâ”€â”€ auto-daemon.js   # PRINCIPAL: Sistema autonomo 50+ replies/dia
â”œâ”€â”€ reply-bot.js     # Bot manual (Telegram listener)
â””â”€â”€ search-daemon.js # Busca proativa antiga (Modo B)

config/
â”œâ”€â”€ profile.json   # Expertise e estilo do usuario
â””â”€â”€ accounts.json  # Contas + discovery + daily_limits

data/
â””â”€â”€ knowledge.json # Base de conhecimento persistente
```

## Executar via Playwright MCP

Quando o bot gera instruÃ§Ãµes, execute no Claude Code:

```
mcp__playwright__browser_navigate("URL")
mcp__playwright__browser_snapshot
mcp__playwright__browser_click("seletor")
mcp__playwright__browser_type("texto")
mcp__playwright__browser_take_screenshot
```

## Limites de SeguranÃ§a

### Modo Manual (reply-bot.js)
- Max 80 replies/dia
- Intervalo 15min-2h entre replies
- Aprovacao via Telegram
- Detecta idioma automaticamente

### Modo Autonomo (auto-daemon.js) - PRINCIPAL
- **Minimo**: 50 replies/dia
- **Normal**: 70 replies/dia
- **Maximo**: 80 replies/dia (anti-bot)
- **Horario**: 8h - 23h59
- **Intervalo**: 10-25min (dinamico)
- **Max por conta**: 3 replies/dia
- **Resumo diario**: 23:30 no Telegram
- **100% autonomo** - sem aprovacao manual

## Subir Servicos (se cairem ou apos reiniciar)

### 1. Chrome do Bot (modo debug) - OBRIGATORIO
```bash
# Mata Chrome do bot se estiver travado
pkill -9 -f "chrome-bot-profile"

# Inicia Chrome com flags anti-suspensao
"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome" \
  --remote-debugging-port=9222 \
  --user-data-dir="$HOME/.chrome-bot-profile" \
  --no-first-run \
  --disable-background-timer-throttling \
  --disable-backgrounding-occluded-windows \
  --disable-renderer-backgrounding \
  "https://x.com" &
```

### 2. AUTO-DAEMON (Principal - 50+ replies/dia)
```bash
cd /Users/user/AppsCalude/Bot-X-Reply

# Foreground (para ver logs)
node scripts/auto-daemon.js

# Background (producao)
nohup node scripts/auto-daemon.js >> logs/auto-daemon.log 2>&1 &
```

### 3. Bot Telegram Manual (opcional)
```bash
cd /Users/user/AppsCalude/Bot-X-Reply
node scripts/reply-bot.js &
```

### 4. Desativar App Nap (se necessario)
```bash
defaults write com.google.Chrome NSAppSleepDisabled -bool YES
```

### Verificar se esta rodando
```bash
# Chrome
curl -s http://127.0.0.1:9222/json/version | head -1

# Auto-daemon
pgrep -f "auto-daemon.js" && echo "Auto-Daemon OK"

# Bot manual (se usar)
pgrep -f "reply-bot.js" && echo "Bot Manual OK"
```

### Parar Auto-Daemon
```bash
# Graceful (salva estado)
pkill -2 -f "auto-daemon.js"

# Forcado
pkill -9 -f "auto-daemon.js"

# IMPORTANTE: Sempre verificar se realmente parou
ps aux | grep "auto-daemon" | grep -v grep
```

### CUIDADO: Multiplos Daemons
Se houver mais de 1 daemon rodando, os replies vao sair muito rapido (um de cada daemon). Sempre verificar:
```bash
ps aux | grep "auto-daemon" | grep -v grep | wc -l
# Deve mostrar 1 (ou 0 se parado)
```

### LaunchAgent vs Manual
O LaunchAgent `com.botxreply.daemon.plist` pode reiniciar o daemon automaticamente, criando duplicatas.
**Se for iniciar manualmente, SEMPRE desabilitar o LaunchAgent primeiro:**
```bash
launchctl bootout gui/$(id -u) ~/Library/LaunchAgents/com.botxreply.daemon.plist 2>/dev/null
launchctl unload ~/Library/LaunchAgents/com.botxreply.daemon.plist 2>/dev/null
```

### LaunchAgents (auto-start)
Os serviÃ§os iniciam automaticamente via launchd:
- `com.botxreply.setup.plist` - Desativa App Nap
- `com.botxreply.chrome.plist` - Chrome modo debug
- `com.botxreply.bot.plist` - Bot Telegram
- `com.botxreply.daemon.plist` - Daemon de busca

---

## Historico de Melhorias (Guia de Referencia)

### 2026-02-02 (v2): Creator Inspiration + Learning System

**Objetivo**: Maximizar boost algoritmico priorizando tweets onde autor responde comentarios

**Insight do Algoritmo do X**:
| Tipo de Engajamento | Peso no Algoritmo |
|---------------------|-------------------|
| Like simples | 1x |
| Reply direto | 13.5x |
| **Reply que recebe reply do autor** | **75x** |

**Nova Fonte: Creator Inspiration**
URL: `https://x.com/i/jf/creators/inspiration/top_posts`

Tweets curados pelo X, COM FALLBACK inteligente:
1. Primeiro tenta pÃ¡gina Creator Inspiration
2. Filtra por keywords relevantes (tech/AI/startups/crypto)
3. Se nÃ£o encontrar tweets do nicho, faz busca com queries relevantes:
   - "AI startup launched min_faves:50"
   - "shipped product min_faves:100"
   - "crypto bitcoin min_faves:100"

**Por que "Most replies" e ouro**:
- Alta conversacao = autor provavelmente responde comentarios
- Se autor responder nosso reply = 75x boost algoritmico!

**Novo Sistema de Score**:
```
Base: likes/100 + retweets/10 + bonus recencia

Por fonte:
- Timeline: +0
- Trending: +10
- HackerNews: +15
- Creator Inspiration: +25
  - Tab "replies": +15 adicional

Por autor engajado (se verificado):
- 5+ replies do autor: +40
- 3+ replies: +25
- 1+ replies: +10
```

**Learning System** (`src/knowledge.js`):
- Registra performance por fonte/pais/tab
- Aprende quais combinacoes geram mais authorReplies
- Auto-ajusta prioridades apos 100+ posts

**Distribuicao por Horario de Pico**:
```
Pico (BR almoco + USA, BR tarde + USA):
  12-14h, 17-20h â†’ intervalo 10-15min

Bom (BR manha, BR noite):
  8-10h, 20-23h â†’ intervalo 12-18min

Fraco (transicao):
  outros â†’ intervalo 18-25min
```

**Arquivos Modificados**:
- `src/discovery.js`: `findCreatorInspirationTweets()`, `checkAuthorEngagement()`, `calculateScore()` atualizado
- `src/knowledge.js`: `recordSourceOutcome()`, `getBestSources()`, learning system
- `scripts/auto-daemon.js`: `getOptimalIntervalConfig()`, integracao learning
- `config/accounts.json`: novas configs

**Filtro de Keywords (Anti-RuÃ­do)**:
O Creator Inspiration mostra tweets populares GERAIS (BBB, mÃºsica, etc).
Filtramos por regex com word boundaries para garantir tweets do nicho:
- Tech/AI: `gpt`, `chatgpt`, `llm`, `claude`, `openai`, `machine learning`
- Startups: `startup`, `founder`, `vc`, `funding`, `shipped`
- Crypto: `bitcoin`, `ethereum`, `web3`, `defi`, `nft`
- Dev: `coding`, `programming`, `python`, `react`, `github`

**Comandos de Teste**:
```bash
# Testar Creator Inspiration isolado
node -e "import('./src/discovery.js').then(m => m.findCreatorInspirationTweets(5).then(console.log))"

# Testar discovery completo (4 fontes)
node -e "import('./src/discovery.js').then(m => m.discoverTweets(10).then(t => console.log(t.map(x => x.source + ':' + x.score))))"

# Ver melhores fontes aprendidas
node -e "import('./src/knowledge.js').then(m => console.log(m.getBestSources()))"
```

---

### 2026-02-02 (v1): Sistema Autonomo 50+ Replies/Dia

**Objetivo**: Transformar bot de aprovacao manual (10/dia) para autonomo (50-80/dia)

**Arquivos Criados**:
1. `src/discovery.js` - Descoberta multi-fonte de tweets
2. `scripts/auto-daemon.js` - Loop autonomo principal

**Arquivos Modificados**:
1. `src/finder.js` - Novos limites e tracking
2. `src/claude.js` - Rotacao de estilos
3. `src/telegram.js` - Resumo diario
4. `config/accounts.json` - Novas configs

**Sistema de Discovery (4 fontes)**:
```
1. Timeline (For You) - tweets do feed
2. Trending Topics - filtra por keywords relevantes (AI, crypto, tech)
3. Hacker News - busca tweets sobre posts do HN
4. Creator Inspiration - tweets curados pelo X (NOVO!)
```

**Rotacao de Estilos (anti-deteccao)**:
```javascript
// Ingles: direct, memory, casual (tbh/ngl), reaction, question
// Portugues: direto, memoria, giria (cara/mano), reacao, opiniao
// Nao repete ultimos 3 estilos usados
```

**Logica de Decisao**:
```
- Abaixo de 50: SEMPRE posta
- 50-70: SEMPRE posta
- 70-80: So se tweet.score >= 80
- Acima de 80: PARA (limite anti-bot)
```

**Intervalo Dinamico por Horario**:
```
Horarios de Pico (12-14h, 17-20h):
  - Base: 12min, Min: 10min, Max: 15min

Horarios Bons (8-10h, 20-23h):
  - Base: 15min, Min: 12min, Max: 18min

Horarios Fracos:
  - Base: 22min, Min: 18min, Max: 25min

+ Ajuste por progresso (atrasado/adiantado)
+ Variacao aleatoria: +/- 2min
```

**Protecoes**:
- Max 3 replies por conta/dia
- Nao repete tweets ja respondidos (hoje + historico)
- Verifica se ja curtiu o tweet
- Filtra por min_likes, max_replies, max_age

**Persistencia**:
- Estado salvo em `.auto-daemon-state.json`
- Base de conhecimento em `data/knowledge.json`
- Sobrevive a reinicializacao

---

### 2026-02-01: Anti-Deteccao de IA

**Problema**: UsuÃ¡rio foi BLOQUEADO por @levelsio por reply detectado como IA.
**Reply problemÃ¡tico**: "That's Eric Chahi's masterpiece! The rotoscoped animation was revolutionary - influenced countless indie devs. Fun fact: it runs on everything now."

**Sinais de IA detectados**:
- "Fun fact:" - frase tÃ­pica de ChatGPT
- "masterpiece", "revolutionary", "countless" - palavras genÃ©ricas de IA
- Estrutura perfeita com mÃºltiplos fatos separados por travessÃµes
- Muita informaÃ§Ã£o empacotada em um reply

**SoluÃ§Ã£o**:
- Reescrito prompt em `src/claude.js` para gerar replies HUMANOS
- Foco em: casual, curto, uma ideia, opiniÃ£o pessoal
- Lista de palavras/frases PROIBIDAS
- Exemplos de como humanos realmente escrevem

---

### 2026-01-30: CorreÃ§Ãµes CrÃ­ticas

#### 1. Timeout do Chrome com Tela Bloqueada
**Problema**: Chrome dava timeout quando a tela do Mac estava bloqueada.
**SoluÃ§Ã£o**:
- Aumentar `protocolTimeout` de 60s para 120s
- Adicionar retry automÃ¡tico (3 tentativas)
- Flags anti-suspensÃ£o no Chrome
- Desativar App Nap: `defaults write com.google.Chrome NSAppSleepDisabled -bool YES`

#### 2. Sistema de Pesquisa Informativa
**Problema**: Replies genÃ©ricos tipo "o que Ã© estranho?" sem contexto.
**SoluÃ§Ã£o**:
- Novo mÃ³dulo `src/research.js`
- Identifica tÃ³pico do tweet antes de gerar
- Pesquisa dados e contexto relevantes
- Gera replies informativos com dados reais

#### 3. Fallback Puppeteer quando API Falha
**Problema**: Quando API do X dÃ¡ erro 429, sistema gerava replies errados baseado sÃ³ no username.
**SoluÃ§Ã£o**:
- Se API falhar â†’ Tenta Puppeteer
- Se Puppeteer falhar â†’ Pede texto manual
- Fluxo: API â†’ Puppeteer â†’ Manual

#### 4. Conflito de InstÃ¢ncias Telegram
**Problema**: Erro "409 Conflict: terminated by other getUpdates request"
**SoluÃ§Ã£o**:
- Descarregar LaunchAgents antes de iniciar manualmente
- `launchctl unload ~/Library/LaunchAgents/com.botxreply.*.plist`
- Manter apenas UMA instÃ¢ncia do bot rodando

### Checklist de Problemas Comuns

| Problema | Causa | Solucao |
|----------|-------|---------|
| Timeout Chrome | Tela bloqueada | Verificar flags anti-suspensao |
| Replies genericos | Sem texto do tweet | Verificar extracao (API ou Puppeteer) |
| Erro 429 | Rate limit X | Aguardar 15-30min ou usar Puppeteer |
| Conflito Telegram | Multiplas instancias | Matar todos e iniciar um so |
| "Nao consegui acessar" | API + Puppeteer falharam | Colar texto manualmente |
| Auto-daemon parou | Crash ou reinicio | Verificar logs, reiniciar |
| Poucos replies | Filtros muito restritivos | Ajustar config/accounts.json |

---

## Configuracao Atual (accounts.json)

```json
{
  "discovery": {
    "enabled": true,
    "explore_timeline": true,
    "explore_trending": true,
    "explore_hacker_news": true,
    "explore_creator_inspiration": true,
    "trending_keywords": ["AI", "crypto", "tech", "startup", "coding", "GPT", "LLM"],
    "creator_inspiration": {
      "enabled": true,
      "priority_tabs": ["replies", "likes"],
      "countries": ["United States", "Brazil"],
      "check_author_engagement": false
    }
  },
  "filters": {
    "min_likes": 10,
    "max_replies": 200,
    "max_age_hours": 12
  },
  "daily_limits": {
    "min_total": 50,
    "normal_total": 70,
    "max_total": 80,
    "max_per_account": 3
  },
  "peak_hours": {
    "high": [12, 13, 14, 17, 18, 19, 20],
    "medium": [8, 9, 10, 21, 22, 23],
    "low": [11, 15, 16]
  },
  "peak_intervals": {
    "high": { "min": 10, "base": 12, "max": 15 },
    "medium": { "min": 12, "base": 15, "max": 18 },
    "low": { "min": 18, "base": 22, "max": 25 }
  }
}
```

---

## Estilos de Reply (Rotacao Automatica)

### REGRAS IMPORTANTES
- NUNCA comecar com: ngl, tbh, honestly, actually, na verdade, sinceramente
- NEM SEMPRE CONCORDAR! Variar entre concordar, discordar, questionar
- Cada reply deve ter abordagem diferente:
  1. Concorda mas adiciona algo
  2. Traz outro angulo/perspectiva
  3. Questiona ou mostra ceticismo

### Ingles (10 estilos)
| Estilo | Dica | Exemplo |
|--------|------|---------|
| direct | reacao curta 3-6 palavras | "this is wild" |
| memory | memoria pessoal | "used to see this pattern in 2021" |
| observation | aponta algo especifico | "that 70k zone looking dangerous" |
| question | pergunta curiosa | "when did this start?" |
| disagree | discorda educadamente | "idk i think opposite might happen" |
| contrarian | visao oposta | "everyone saying this but last time it dumped" |
| skeptic | duvida da premissa | "feels like a trap setup" |
| add_context | adiciona info | "funding rates still negative tho" |
| personal_take | sua previsao | "my bet is we sweep lows first" |
| experience | experiencia pessoal | "got rekt fading this signal last time" |

### Portugues (10 estilos)
| Estilo | Dica | Exemplo |
|--------|------|---------|
| direto | reacao curta | "isso ta tenso" |
| memoria | passado pessoal | "vi isso em 2021" |
| observacao | aponta especifico | "essa zona de 70k preocupa" |
| pergunta | curiosa | "desde quando ta assim?" |
| discordo | discorda | "sei la acho q vai ser o contrario" |
| contrario | visao oposta | "todo mundo fala isso mas despencou" |
| cetico | duvida | "parece armadilha" |
| contexto | adiciona info | "funding ainda negativo ne" |
| opiniao | sua previsao | "aposto q busca fundo antes" |
| experiencia | pessoal | "tomei prejuizo ignorando isso" |

**Regra**: Nao repete os ultimos 5 estilos usados

---

## Emojis Contextuais (Anti-Deteccao)

### Implementacao (2026-02-02)
Emojis adicionados de forma natural e aleatorio (~30%) para parecer mais humano.

**Arquivo**: `src/claude.js` linha ~131 (dentro de `REPLY_SYSTEM_PROMPT`)

### Regras no Prompt
- Usar em ~30% dos replies (Claude decide)
- Maximo 1 emoji por reply
- Sempre no FINAL do texto
- Na duvida, NAO usar

### Emojis Permitidos
| Emoji | Contexto |
|-------|----------|
| ğŸ˜… | Situacao engraÃ§ada/constrangedora |
| ğŸ¤” | Duvida, pensando, cetico |
| ğŸ‘€ | Interessante, observando |
| ğŸ˜¬ | Tenso, preocupante |
| ğŸ‘ | Concordancia |
| ğŸ«  | Overwhelmed, derretendo |

### Emojis PROIBIDOS
ğŸ”¥ğŸš€ğŸ’¯â¤ï¸ğŸ¤–ğŸ¤¯ğŸ™Œ - Combinacoes classicas de bots/spam

### Exemplos
```
"isso ta tenso ğŸ˜¬"
"faz sentido ğŸ‘"
"sei la ğŸ¤”"
"que isso kkkk ğŸ˜…"
```